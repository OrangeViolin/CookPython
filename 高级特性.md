# 高级特性


## iterable 和 iterator (迭代器)

我还是不知道，可迭代对象是什么意思，迭代器是什么，切换来切换去有什么意思，解决什么问题。

Iteration is a general term for taking each item of something, one after another. Any time you use a loop, explicit or implicit, to go over a group of items, that is iteration.

当我们用一个循环（比如 for 循环）来遍历容器（比如列表，元组）中的元素时，这种遍历的过程就叫迭代。

![](https://ws2.sinaimg.cn/large/006tNc79ly1g5x4ovn5ikj30l206sdg0.jpg)

像上面这种可以使用 for 循环进行迭代的对象，就是可迭代对象，它的定义如下:

In Python, iterable and iterator have specific meanings.

An iterable is an object that has an __iter__ method which returns an iterator, or which defines a __getitem__ method that can take sequential indexes starting from zero (and raises an IndexError when the indexes are no longer valid). So an iterable is an object that you can get an iterator from.

我们可以用 Python 内置的 hasattr() 函数来判断一个对象是不是可迭代：

![](https://ws3.sinaimg.cn/large/006tNc79ly1g5x4w4dws9j30sa0p877r.jpg)

- 数字不是可迭代的对象。
- hasattr()该实参是一个对象和一个字符串。如果字符串是对象的属性之一的名称，则返回 True，否则返回 False。（此功能是通过调用 getattr(object, name) 看是否有 AttributeError 异常来实现的。）
- 什么是对象的属性的名称

An iterator is an object with a next (Python 2) or __next__ (Python 3) method.

现在，让我们看看什么是迭代器（Iterator）。上文说过，迭代器是指遵循迭代器协议（iterator protocol）的对象。从这句话我们可以知道，迭代器是一个对象，但比较特别，它需要遵循迭代器协议，那什么是迭代器协议呢？

迭代器协议（iterator protocol）是指要实现对象的 __iter()__ 和 next() 方法（注意：Python3 要实现 __next__() 方法），其中，__iter()__ 方法返回迭代器对象本身，next() 方法返回容器的下一个元素，在没有后续元素时抛出 StopIteration 异常。
接下来讲讲迭代器的例子，有什么常见的迭代器呢？列表是迭代器吗？字典是迭代器吗？我们使用 hasattr() 进行判断：

[迭代器 (Iterator) - Python 之旅 - 极客学院Wiki](https://wiki.jikexueyuan.com/project/explore-python/Advanced-Features/iterator.html)

Whenever you use a for loop, or map, or a list comprehension, etc. in Python, the next method is called automatically to get each item from the iterator, thus going through the process of iteration.

A good place to start learning would be the [9. Classes — Python 3.7.4 documentation](https://docs.python.org/3/tutorial/classes.html#iterators) and the [Built-in Types — Python 3.9.0a0 documentation](https://docs.python.org/dev/library/stdtypes.html#iterator-types). After you understand the basics, try the [Functional Programming HOWTO — Python 3.9.0a0 documentation](https://docs.python.org/dev/howto/functional.html#iterators).

## 生成器

## 上下文管理器


